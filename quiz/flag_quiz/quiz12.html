<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Country Flag Quiz - Question 12</title>
  <link rel="stylesheet" href="style.css">
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-KLWYP8Y9KD"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-KLWYP8Y9KD');
</script>

<!--rewarded -->
<style>
.modal .btn {
padding: .5rem;
background: #2990ea;
border: none;
border-radius: 4px;
margin: 4px;
display: none; /* Initially hide the close button */
}
.modal p {
text-align: center;
}
</style>
<script>
googletag = window.googletag || { cmd: [] };
googletag.cmd.push(() => {
const e = localStorage.getItem("hasShownRewardedAd"),
o = Date.now();
if (!e || o - parseInt(e, 10) > 6e5) {
const adSlotRewarded = googletag
.defineOutOfPageSlot("/23164546956/video", googletag.enums.OutOfPageFormat.REWARDED) // Updated AdUnit Path
.addService(googletag.pubads());

adSlotRewarded.setForceSafeFrame(true);
googletag.pubads().enableAsyncRendering();
googletag.enableServices();

(function () {
const modal = document.getElementById("rewardModal");
const closeButton = document.querySelector('.modal .btn');

// Disable back button during ad playback
window.addEventListener("popstate", function (event) {
history.pushState(null, null, location.href);
});

// Event listeners for reward ad
googletag.pubads().addEventListener("impressionViewable", function () {
console.log("Impression viewable!");

// Show close button only after 30 seconds
setTimeout(() => {
closeButton.style.display = "block";
}, 30000); // 30 seconds delay for close button
});

googletag.pubads().addEventListener("slotRenderEnded", function (event) {
if (event.isEmpty) {
console.log("Ad is empty or failed to load");
setTimeout(function () {
modal.classList.remove("block");
modal.classList.add("hidden");
}, 0);
}
});

googletag.pubads().addEventListener("rewardedSlotReady", function (event) {
modal.classList.remove("hidden");
modal.classList.add("block");
event.makeRewardedVisible();
});

googletag.pubads().addEventListener("rewardedSlotClosed", function (event) {
modal.classList.remove("block");
modal.classList.add("hidden");
localStorage.setItem("hasShownRewardedAd", o.toString());
});

// Ensure ad is displayed
googletag.display(adSlotRewarded);
})();
}
});
</script>

<div id="rewardModal" class="hidden modal fixed z-10 pt-80 left-0 top-0 w-full h-full overflow-auto bg-black bg-opacity-5">
<div class="modal-content m-auto p-6 bg-slate-100 text-center fixed top-2/4 left-2/4 transform -translate-x-2/4 -translate-y-2/4">
<p>Watch the ad to continue.</p>
<button class="btn">Close Ad</button>
</div>
</div>
<!--rewarded end -->


</head>
<body>
  <div class="container">
    <section class="ad-section top">
              <div class="ad-placeholder">
       <script async src="https://securepubads.g.doubleclick.net/tag/js/gpt.js" crossorigin="anonymous"></script>
<script>
  window.googletag = window.googletag || {cmd: []};
  googletag.cmd.push(function() {
    googletag.defineSlot('/23164546956/2048Game/Quiz_1', [[300, 600], [300, 250], [200, 200], [336, 280], [250, 250], [250, 360], [970, 250]], 'div-gpt-ad-1766680785235-0').addService(googletag.pubads());
    googletag.enableServices();
  });
</script><!-- /23164546956/2048Game/Quiz_1 -->
<div id='div-gpt-ad-1766680785235-0' style='min-width: 200px; min-height: 200px;'>
  <script>
    googletag.cmd.push(function() { googletag.display('div-gpt-ad-1766680785235-0'); });
  </script>
</div>
      </div>
    </section>

    <section class="quiz-section">
      <div class="progress-text"></div>
      <div class="progress-bar">
        <div class="progress-fill"></div>
      </div>
      
      <h1 class="quiz-title"></h1>
      
      <div class="flag-container">
        <div class="flag-image"></div>
      </div>
      
      <div class="options-container"></div>
      
      <div class="feedback"></div>
    </section>

    <section class="navigation">
      <button class="nav-button prev">← Previous</button>
      <button class="nav-button next">Next →</button>
    </section>

    <section class="ad-section bottom">
             <div class="ad-placeholder">
       <script async src="https://securepubads.g.doubleclick.net/tag/js/gpt.js" crossorigin="anonymous"></script>
<script>
  window.googletag = window.googletag || {cmd: []};
  googletag.cmd.push(function() {
    googletag.defineSlot('/23164546956/2048Game/Quiz_1', [[336, 280], [250, 250], [970, 250], [250, 360], [200, 200], [300, 250], [300, 600]], 'div-gpt-ad-1766680797423-0').addService(googletag.pubads());
    googletag.enableServices();
  });
</script><!-- /23164546956/2048Game/Quiz_1 -->
<div id='div-gpt-ad-1766680797423-0' style='min-width: 200px; min-height: 200px;'>
  <script>
    googletag.cmd.push(function() { googletag.display('div-gpt-ad-1766680797423-0'); });
  </script>
</div>
      </div>
    </section>
  </div>

  <script src="script.js"></script>
</body>
</html>
